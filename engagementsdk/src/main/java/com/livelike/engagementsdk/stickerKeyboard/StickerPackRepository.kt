package com.livelike.engagementsdk.stickerKeyboard

import android.content.Context
import com.bumptech.glide.Glide
import com.google.gson.Gson
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext


class StickerPackRepository(programId: String) {
    private val endpoint = "https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/?program_id=$programId"
    private var stickerPackList : List<StickerPack>? = null

    suspend fun getStickerPacks() : List<StickerPack>{
        return withContext(Dispatchers.IO){
            if(stickerPackList == null){
                stickerPackList = try {
//                    val response = URL(endpoint).readText()
                    val response = """{"count":6,"next":null,"previous":null,"results":[{"id":"6fd08795-377d-4576-8291-2538efa3d283","url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6fd08795-377d-4576-8291-2538efa3d283/","client_id":"l3euw77STbgCVQn59AQZudZ163qO2EhzWVOKBfpu","name":"QA Stickers","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/b961475d-f6c6-40b8-94eb-afdd37decccc.png","mimetype":"image/png","stickers":[{"id":"12840f61-bd1f-4eeb-ac26-3b7a68bf29cf","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/12840f61-bd1f-4eeb-ac26-3b7a68bf29cf/","pack_id":"6fd08795-377d-4576-8291-2538efa3d283","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6fd08795-377d-4576-8291-2538efa3d283/","pack_name":"QA Stickers","shortcode":"android","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/347e4816-ab99-490e-aaef-b8a654ff0d3d.png","mimetype":"image/png"}]},{"id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","client_id":"l3euw77STbgCVQn59AQZudZ163qO2EhzWVOKBfpu","name":"Raptors","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/70f8548d-d95c-470a-a6ec-de5beff19260.png","mimetype":"image/png","stickers":[{"id":"ad208905-2458-4f1f-b98a-5acd552ec4ed","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/ad208905-2458-4f1f-b98a-5acd552ec4ed/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors22","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/6faa40ad-9491-42d1-b7df-ec24c1dc336b.png","mimetype":"image/png"},{"id":"e85b6fe2-d65c-4e1c-b615-83825b3e657e","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/e85b6fe2-d65c-4e1c-b615-83825b3e657e/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors21","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/bc1790f8-36ab-4722-b193-6feb7f5779ea.png","mimetype":"image/png"},{"id":"818e8c09-ed82-4601-bbcf-7ae0d05654f8","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/818e8c09-ed82-4601-bbcf-7ae0d05654f8/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors20","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/25792fa0-f5ff-45a6-aad1-7bc71a0825ed.png","mimetype":"image/png"},{"id":"e15947a3-e05c-4f80-a945-4cc2c1173641","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/e15947a3-e05c-4f80-a945-4cc2c1173641/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors19","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/40636731-9de6-4eff-8072-f84f04803832.png","mimetype":"image/png"},{"id":"c3516485-d3d7-4e71-96d3-dafdcdc17f17","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/c3516485-d3d7-4e71-96d3-dafdcdc17f17/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors18","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/c5ce8982-79a4-46dc-a9cf-a16bf6eba647.png","mimetype":"image/png"},{"id":"3622971d-e714-4073-bc87-9fa1c7cd4a07","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/3622971d-e714-4073-bc87-9fa1c7cd4a07/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors17","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/ef9d2d31-f23f-4aea-b93c-ba1760640fcb.png","mimetype":"image/png"},{"id":"c03d1610-9c8a-4911-89c6-56d406ea8389","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/c03d1610-9c8a-4911-89c6-56d406ea8389/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors16","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/f661a85a-9f83-435e-aa4d-0b84f3f72a20.png","mimetype":"image/png"},{"id":"dfb56ee0-d1b5-4866-b58a-5d7497f4a82f","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/dfb56ee0-d1b5-4866-b58a-5d7497f4a82f/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors15","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/591c6e90-09e0-49e1-b847-0923871eaaad.png","mimetype":"image/png"},{"id":"821173f3-a99b-4a88-a1d1-4e052e88bfed","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/821173f3-a99b-4a88-a1d1-4e052e88bfed/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors14","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/d4e5ca56-d7df-4390-a53a-025fe16b3ec2.png","mimetype":"image/png"},{"id":"3be9267d-0bac-4da4-a84a-960dfead3405","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/3be9267d-0bac-4da4-a84a-960dfead3405/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors13","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/01ba21b4-622f-4e24-827b-0eced28caf29.png","mimetype":"image/png"},{"id":"3f34fd5d-2431-498c-a87c-749eeef837e7","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/3f34fd5d-2431-498c-a87c-749eeef837e7/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors6","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/39a30244-d570-4b45-83d3-9cffe0bc9e99.png","mimetype":"image/png"},{"id":"809df7ee-1e8e-405c-a0d8-323581c656db","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/809df7ee-1e8e-405c-a0d8-323581c656db/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors5","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/a53babb6-d3cc-4680-91d9-dba3348c3f7f.png","mimetype":"image/png"},{"id":"7baa94e9-9b0e-4484-ba84-5259f742b6ad","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/7baa94e9-9b0e-4484-ba84-5259f742b6ad/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors3","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/e1d92d58-6a68-4833-9a55-fc3aff1b8b5f.png","mimetype":"image/png"},{"id":"3843c6d6-6995-4cb3-ba32-5eabe2bda93a","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/3843c6d6-6995-4cb3-ba32-5eabe2bda93a/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors12","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/3bad291a-280c-425a-a460-60c2b179e03f.png","mimetype":"image/png"},{"id":"4c538292-68a4-4725-8388-3768cf7d14ad","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/4c538292-68a4-4725-8388-3768cf7d14ad/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors11","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/f5307b16-22cb-4ae8-ac50-76b6b36ac757.png","mimetype":"image/png"},{"id":"a4b36161-7967-4c9a-994c-9ce3c09c8787","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/a4b36161-7967-4c9a-994c-9ce3c09c8787/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors10","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/6a051d39-e617-4020-a097-296ffc91ef56.png","mimetype":"image/png"},{"id":"f6db7375-983f-451f-83e3-c0622871953f","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/f6db7375-983f-451f-83e3-c0622871953f/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors9","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/dff9fb9b-9a3a-41cc-9ae5-db07570c06df.png","mimetype":"image/png"},{"id":"b8df4f0b-4e05-4a3a-a4c7-8f3f4fc9e818","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/b8df4f0b-4e05-4a3a-a4c7-8f3f4fc9e818/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors8","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/91ef610b-a64f-465a-ae99-a2a73dfb0976.png","mimetype":"image/png"},{"id":"d0c3b021-679f-4de7-9b8b-36e6a3e8084e","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/d0c3b021-679f-4de7-9b8b-36e6a3e8084e/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors7","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/3d5a513e-0d3c-45f6-b907-57dd0d291cd9.png","mimetype":"image/png"},{"id":"60bb9f15-4afc-4d0a-8358-23a79d0db731","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/60bb9f15-4afc-4d0a-8358-23a79d0db731/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors4","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/773e406e-601e-432c-8f74-b782f5370f71.png","mimetype":"image/png"},{"id":"7f7e3f56-6d1a-4599-a65a-536d2d1bc070","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/7f7e3f56-6d1a-4599-a65a-536d2d1bc070/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors2","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/118e567d-0805-4f60-8dcb-1b9ff6e7376b.png","mimetype":"image/png"},{"id":"1443f975-5df6-455e-9293-4775d2c32fa7","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/1443f975-5df6-455e-9293-4775d2c32fa7/","pack_id":"6e5b25aa-5d33-459e-8112-af91f11ce95a","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/6e5b25aa-5d33-459e-8112-af91f11ce95a/","pack_name":"Raptors","shortcode":"raptors1","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/d4c342e6-6c6a-4bfc-9b75-8635a9f7a9c3.png","mimetype":"image/png"}]},{"id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","client_id":"l3euw77STbgCVQn59AQZudZ163qO2EhzWVOKBfpu","name":"iOS-Test-Stickers","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/a09b926e-a177-43b7-8272-f1c24dec5fef.png","mimetype":"image/png","stickers":[{"id":"20374d38-1a3e-4204-9cf1-efb398d7ccca","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/20374d38-1a3e-4204-9cf1-efb398d7ccca/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated19","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/3fe96b68-354c-422d-84fc-69dbc86ebeb2.gif","mimetype":"image/gif"},{"id":"0001c6ad-761c-4b03-afcd-8ab7db51854f","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/0001c6ad-761c-4b03-afcd-8ab7db51854f/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated18","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/e621b338-f1d9-4c5b-98f1-b7dc3038e3a0.gif","mimetype":"image/gif"},{"id":"bb7b5f77-3377-4112-8242-4092eb955dd0","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/bb7b5f77-3377-4112-8242-4092eb955dd0/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated17","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/05695b95-a1b4-49e6-a435-441050946618.gif","mimetype":"image/gif"},{"id":"44724655-eaa1-4d4b-8bb6-2dec4e2f50dc","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/44724655-eaa1-4d4b-8bb6-2dec4e2f50dc/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated16","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/52e4cbd0-e61b-4796-8270-6f7d22662eef.gif","mimetype":"image/gif"},{"id":"f3387a75-c5b2-4f15-8665-6040970458ff","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/f3387a75-c5b2-4f15-8665-6040970458ff/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated15","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/e23e8412-b7dd-4dad-8be0-118a56d4d8d7.gif","mimetype":"image/gif"},{"id":"ad3d0f54-2274-4189-ae9c-bbabcad53d6c","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/ad3d0f54-2274-4189-ae9c-bbabcad53d6c/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated14","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/d6843337-5e24-49d1-b43f-1d93170be79d.gif","mimetype":"image/gif"},{"id":"d85253e7-a802-4388-8fd7-bcdedf70a3b7","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/d85253e7-a802-4388-8fd7-bcdedf70a3b7/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated13","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/339bd675-b93a-40d3-81b4-5e1801ad7e6f.gif","mimetype":"image/gif"},{"id":"3b8633a9-7173-40f4-b6bd-ebc40f3939c6","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/3b8633a9-7173-40f4-b6bd-ebc40f3939c6/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated12","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/672f20b1-eaa7-42ec-be53-b39a9407425b.gif","mimetype":"image/gif"},{"id":"938f7412-39d9-4a52-830a-c7ee1ca5e15a","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/938f7412-39d9-4a52-830a-c7ee1ca5e15a/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated11","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/0219c8fa-a0b8-4780-8bbd-e5341d6973cd.gif","mimetype":"image/gif"},{"id":"a03f29a9-38a8-4d2a-bda0-0a1c101cff1f","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/a03f29a9-38a8-4d2a-bda0-0a1c101cff1f/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated10","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/b14d6c4f-57cb-4533-ad1c-ad08126e4ac8.gif","mimetype":"image/gif"},{"id":"7fca84ac-189f-4a55-b99f-80c43461077c","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/7fca84ac-189f-4a55-b99f-80c43461077c/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated9","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/e543d114-4a19-4e37-ac7a-a8d5870e30c7.gif","mimetype":"image/gif"},{"id":"8b3d863c-29d3-4003-a120-76f7944cecd8","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/8b3d863c-29d3-4003-a120-76f7944cecd8/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated8","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/e15eb533-84cc-45ac-b561-2ccb66dc6b21.gif","mimetype":"image/gif"},{"id":"1cee12d8-b9b9-4d4c-99f0-5e784a3c0044","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/1cee12d8-b9b9-4d4c-99f0-5e784a3c0044/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated7","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/46f4cfee-754c-4be2-b211-47a96f6f6159.gif","mimetype":"image/gif"},{"id":"f260506b-76d1-47ef-a988-8e5f2ddd4a52","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/f260506b-76d1-47ef-a988-8e5f2ddd4a52/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated6","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/bce984c3-f44b-492d-9db4-cea143a3651e.gif","mimetype":"image/gif"},{"id":"c87b00e3-9237-4065-8bf9-8dc9a3f422bd","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/c87b00e3-9237-4065-8bf9-8dc9a3f422bd/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated5","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/129c7a9d-2ad2-4e80-a6b1-b3dc3b121db1.gif","mimetype":"image/gif"},{"id":"e8846311-e47f-4b32-a806-19c01d6d3704","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/e8846311-e47f-4b32-a806-19c01d6d3704/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated4","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/d92eb338-bb4e-4fa5-b38f-09ad65ecb326.gif","mimetype":"image/gif"},{"id":"cab93e67-251f-4b42-a40d-1d2e682882cb","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/cab93e67-251f-4b42-a40d-1d2e682882cb/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated3","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/dd35fd16-c149-4490-8bbd-912a4b3201bf.gif","mimetype":"image/gif"},{"id":"aea4e639-e3d0-421b-ae74-8b363b93876d","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/aea4e639-e3d0-421b-ae74-8b363b93876d/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated2","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/ad3643f6-936a-4b70-80ea-2442716a2210.gif","mimetype":"image/gif"},{"id":"a98655da-6b2a-4cf3-b8c7-5d4a4cf5d2cf","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/a98655da-6b2a-4cf3-b8c7-5d4a4cf5d2cf/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"animated1","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/1e5db6d7-c857-4e90-8e69-1274dc621bff.gif","mimetype":"image/gif"},{"id":"1c3dadb0-ed2b-452e-ad54-c68be034b9a2","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/1c3dadb0-ed2b-452e-ad54-c68be034b9a2/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"scared","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/804dfc39-dd08-4a9a-8f79-03fab2e5e98d.png","mimetype":"image/png"},{"id":"87dea010-8ce7-41cc-94ce-44e23c391dcf","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/87dea010-8ce7-41cc-94ce-44e23c391dcf/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"viking","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/0be60a95-b061-4301-8afe-da07b7d13b82.png","mimetype":"image/png"},{"id":"e628fa67-4cb3-4888-89f3-90d6e3eac2ff","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/e628fa67-4cb3-4888-89f3-90d6e3eac2ff/","pack_id":"9633ff1b-ac9a-4dda-b00a-88c6516a0ebf","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/9633ff1b-ac9a-4dda-b00a-88c6516a0ebf/","pack_name":"iOS-Test-Stickers","shortcode":"woohoo","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/afb54371-b93f-4d51-81d8-eb1f3c29cd35.png","mimetype":"image/png"}]},{"id":"74f30d28-2d0b-4a8d-b379-9a9ca5c93b15","url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/74f30d28-2d0b-4a8d-b379-9a9ca5c93b15/","client_id":"l3euw77STbgCVQn59AQZudZ163qO2EhzWVOKBfpu","name":"Name","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/5a7b61db-cb09-4a9e-bdfd-2ab780f42aed.png","mimetype":"image/png","stickers":[{"id":"ff714b86-706f-4e0e-a36f-ec9044aecf98","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/ff714b86-706f-4e0e-a36f-ec9044aecf98/","pack_id":"74f30d28-2d0b-4a8d-b379-9a9ca5c93b15","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/74f30d28-2d0b-4a8d-b379-9a9ca5c93b15/","pack_name":"Name","shortcode":"name","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/7af8a670-3ae2-49ab-a1af-822111b42015.png","mimetype":"image/png"}]},{"id":"338d2251-3a2a-4c9a-a937-0a4754155d62","url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/338d2251-3a2a-4c9a-a937-0a4754155d62/","client_id":"l3euw77STbgCVQn59AQZudZ163qO2EhzWVOKBfpu","name":"RIT","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/3ea20a73-7c60-4d3d-942e-f4d456b53de1.png","mimetype":"image/png","stickers":[{"id":"db817041-314e-4edd-a5c4-7668e2e8d93d","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/db817041-314e-4edd-a5c4-7668e2e8d93d/","pack_id":"338d2251-3a2a-4c9a-a937-0a4754155d62","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/338d2251-3a2a-4c9a-a937-0a4754155d62/","pack_name":"RIT","shortcode":"docomo","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/7e4fc652-8267-4046-a32f-dfeac0c725b6.png","mimetype":"image/png"}]},{"id":"97db2319-39f4-42ce-9cc8-2d0aefb8b037","url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/97db2319-39f4-42ce-9cc8-2d0aefb8b037/","client_id":"l3euw77STbgCVQn59AQZudZ163qO2EhzWVOKBfpu","name":"RG","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/38a8ea0a-0dff-45d3-a74f-09b8ea8b8d5d.jpg","mimetype":"image/jpeg","stickers":[{"id":"0ff23853-4c1a-4854-a24e-882ec2239717","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/0ff23853-4c1a-4854-a24e-882ec2239717/","pack_id":"97db2319-39f4-42ce-9cc8-2d0aefb8b037","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/97db2319-39f4-42ce-9cc8-2d0aefb8b037/","pack_name":"RG","shortcode":"rg","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/c1428194-9db7-400d-884b-4ff570bc649c.png","mimetype":"image/png"},{"id":"451b14a1-f015-461d-8203-408b69369260","url":"https://cf-blast-staging.livelikecdn.com/api/v1/stickers/451b14a1-f015-461d-8203-408b69369260/","pack_id":"97db2319-39f4-42ce-9cc8-2d0aefb8b037","pack_url":"https://cf-blast-staging.livelikecdn.com/api/v1/sticker-packs/97db2319-39f4-42ce-9cc8-2d0aefb8b037/","pack_name":"RG","shortcode":"roland","file":"https://cf-blast-storage-staging.livelikecdn.com/stickers/7fff8b10-5a2e-4a1d-8363-8094e65bfeb0.png","mimetype":"image/png"}]}]}"""
                    val stickerRes = Gson().fromJson(response, StickerPackResults::class.java)
                    stickerRes.results
                }catch (e:Exception){
                    listOf()
                }
            }
            return@withContext stickerPackList as List<StickerPack>
        }
    }

    fun preloadImages(context: Context) {
        stickerPackList?.forEach {
            Glide.with(context).load(it.file).preload()
            it.stickers.forEach { sticker ->
                Glide.with(context).load(sticker.file).preload()
            }
        }
    }

    // When in the input the user type :shortcode: a regex captures it and this fun is used to find the corresponding sticker if it exists.
    fun getSticker(shortcode: String) : Sticker? {
        return stickerPackList?.map { it.stickers }?.flatten()?.find { it.shortcode == shortcode }
    }

}